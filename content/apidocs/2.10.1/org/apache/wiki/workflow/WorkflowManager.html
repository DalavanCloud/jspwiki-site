<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc (build 1.6.0_19) on Fri May 23 21:23:18 CEST 2014 -->
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
<TITLE>
WorkflowManager (Apache JSPWiki Main War 2.10.1 API)
</TITLE>

<META NAME="date" CONTENT="2014-05-23">

<LINK REL ="stylesheet" TYPE="text/css" HREF="../../../../stylesheet.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="WorkflowManager (Apache JSPWiki Main War 2.10.1 API)";
    }
}
</SCRIPT>
<NOSCRIPT>
</NOSCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">
<HR>


<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<A HREF="#skip-navbar_top" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/WorkflowManager.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../../org/apache/wiki/workflow/WorkflowBuilder.html" title="class in org.apache.wiki.workflow"><B>PREV CLASS</B></A>&nbsp;
&nbsp;NEXT CLASS</FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../index.html?org/apache/wiki/workflow/WorkflowManager.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="WorkflowManager.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;<A HREF="#field_summary">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;<A HREF="#field_detail">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_top"></A>
<!-- ========= END OF TOP NAVBAR ========= -->

<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>
<FONT SIZE="-1">
org.apache.wiki.workflow</FONT>
<BR>
Class WorkflowManager</H2>
<PRE>
<A HREF="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</A>
  <IMG SRC="../../../../resources/inherit.gif" ALT="extended by "><B>org.apache.wiki.workflow.WorkflowManager</B>
</PRE>
<DL>
<DT><B>All Implemented Interfaces:</B> <DD><A HREF="http://docs.oracle.com/javase/6/docs/api/java/util/EventListener.html?is-external=true" title="class or interface in java.util">EventListener</A>, <A HREF="../../../../org/apache/wiki/event/WikiEventListener.html" title="interface in org.apache.wiki.event">WikiEventListener</A></DD>
</DL>
<HR>
<DL>
<DT><PRE>public class <A HREF="../../../../src-html/org/apache/wiki/workflow/WorkflowManager.html#line.48"><B>WorkflowManager</B></A><DT>extends <A HREF="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</A><DT>implements <A HREF="../../../../org/apache/wiki/event/WikiEventListener.html" title="interface in org.apache.wiki.event">WikiEventListener</A></DL>
</PRE>
<map id="APIVIZ" name="APIVIZ">
<area shape="rect" id="node1" href="../event/WikiEventListener.html" title="&#171;interface&#187; WikiEventListener (org.apache.wiki.event)" alt="" coords="5,6,160,69"/>
<area shape="rect" id="node2" href="WorkflowManager.html" title="WorkflowManager" alt="" coords="20,109,145,137"/>
</map>
<div id="apivizContainer" style="text-align: center;"><img src="WorkflowManager.png" usemap="#APIVIZ" border="0"></div>

<P>
<p>
 Monitor class that tracks running Workflows. The WorkflowManager also keeps
 track of the names of users or groups expected to approve particular
 Workflows.
 </p>
<P>

<P>
<HR>

<P>
<!-- =========== FIELD SUMMARY =========== -->

<A NAME="field_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Field Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected static&nbsp;<A HREF="http://docs.oracle.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/apache/wiki/workflow/WorkflowManager.html#PROPERTY_APPROVER_PREFIX">PROPERTY_APPROVER_PREFIX</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The prefix to use for looking up <code>jspwiki.properties</code> approval roles.</TD>
</TR>
</TABLE>
&nbsp;
<!-- ======== CONSTRUCTOR SUMMARY ======== -->

<A NAME="constructor_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Constructor Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><B><A HREF="../../../../org/apache/wiki/workflow/WorkflowManager.html#WorkflowManager()">WorkflowManager</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Constructs a new WorkflowManager, with an empty workflow cache.</TD>
</TR>
</TABLE>
&nbsp;
<!-- ========== METHOD SUMMARY =========== -->

<A NAME="method_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Method Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/apache/wiki/workflow/WorkflowManager.html#actionPerformed(org.apache.wiki.event.WikiEvent)">actionPerformed</A></B>(<A HREF="../../../../org/apache/wiki/event/WikiEvent.html" title="class in org.apache.wiki.event">WikiEvent</A>&nbsp;event)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Listens for <A HREF="../../../../org/apache/wiki/event/WorkflowEvent.html" title="class in org.apache.wiki.event"><CODE>WorkflowEvent</CODE></A> objects emitted
 by Workflows.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/apache/wiki/workflow/WorkflowManager.html#add(org.apache.wiki.workflow.Workflow)">add</A></B>(<A HREF="../../../../org/apache/wiki/workflow/Workflow.html" title="class in org.apache.wiki.workflow">Workflow</A>&nbsp;workflow)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Protected helper method that adds a newly created Workflow to the cache,
 and sets its <code>workflowManager</code> and <code>Id</code>
 properties if not set.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="http://docs.oracle.com/javase/6/docs/api/java/security/Principal.html?is-external=true" title="class or interface in java.security">Principal</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/apache/wiki/workflow/WorkflowManager.html#getApprover(java.lang.String)">getApprover</A></B>(<A HREF="http://docs.oracle.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</A>&nbsp;messageKey)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Looks up and resolves the actor who approves a Decision for a particular
 Workflow, based on the Workflow's message key.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="http://docs.oracle.com/javase/6/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/apache/wiki/workflow/WorkflowManager.html#getCompletedWorkflows()">getCompletedWorkflows</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns a collection of finished workflows; that is, those that have aborted or completed.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../../org/apache/wiki/workflow/DecisionQueue.html" title="class in org.apache.wiki.workflow">DecisionQueue</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/apache/wiki/workflow/WorkflowManager.html#getDecisionQueue()">getDecisionQueue</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns the DecisionQueue associated with this WorkflowManager</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;<A HREF="../../../../org/apache/wiki/WikiEngine.html" title="class in org.apache.wiki">WikiEngine</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/apache/wiki/workflow/WorkflowManager.html#getEngine()">getEngine</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Protected helper method that returns the associated WikiEngine</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="http://docs.oracle.com/javase/6/docs/api/java/util/Collection.html?is-external=true" title="class or interface in java.util">Collection</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/apache/wiki/workflow/WorkflowManager.html#getOwnerWorkflows(org.apache.wiki.WikiSession)">getOwnerWorkflows</A></B>(<A HREF="../../../../org/apache/wiki/WikiSession.html" title="class in org.apache.wiki">WikiSession</A>&nbsp;session)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns the current workflows a wiki session owns.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="http://docs.oracle.com/javase/6/docs/api/java/util/Collection.html?is-external=true" title="class or interface in java.util">Collection</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/apache/wiki/workflow/WorkflowManager.html#getWorkflows()">getWorkflows</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns a collection of the currently active workflows.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/apache/wiki/workflow/WorkflowManager.html#initialize(org.apache.wiki.WikiEngine, java.util.Properties)">initialize</A></B>(<A HREF="../../../../org/apache/wiki/WikiEngine.html" title="class in org.apache.wiki">WikiEngine</A>&nbsp;engine,
                     <A HREF="http://docs.oracle.com/javase/6/docs/api/java/util/Properties.html?is-external=true" title="class or interface in java.util">Properties</A>&nbsp;props)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Initializes the WorkflowManager using a specfied WikiEngine and
 properties.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/apache/wiki/workflow/WorkflowManager.html#remove(org.apache.wiki.workflow.Workflow)">remove</A></B>(<A HREF="../../../../org/apache/wiki/workflow/Workflow.html" title="class in org.apache.wiki.workflow">Workflow</A>&nbsp;workflow)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Protected helper method that removes a specified Workflow from the cache,
 and moves it to the workflow history list.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/apache/wiki/workflow/WorkflowManager.html#requiresApproval(java.lang.String)">requiresApproval</A></B>(<A HREF="http://docs.oracle.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</A>&nbsp;messageKey)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns <code>true</code> if a workflow matching a particular key
 contains an approval step.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/apache/wiki/workflow/WorkflowManager.html#start(org.apache.wiki.workflow.Workflow)">start</A></B>(<A HREF="../../../../org/apache/wiki/workflow/Workflow.html" title="class in org.apache.wiki.workflow">Workflow</A>&nbsp;workflow)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Adds a new workflow to the set of workflows and starts it.</TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_java.lang.Object"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Methods inherited from class java.lang.<A HREF="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</A></B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><A HREF="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#clone()" title="class or interface in java.lang">clone</A>, <A HREF="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#equals(java.lang.Object)" title="class or interface in java.lang">equals</A>, <A HREF="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#finalize()" title="class or interface in java.lang">finalize</A>, <A HREF="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#getClass()" title="class or interface in java.lang">getClass</A>, <A HREF="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#hashCode()" title="class or interface in java.lang">hashCode</A>, <A HREF="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#notify()" title="class or interface in java.lang">notify</A>, <A HREF="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#notifyAll()" title="class or interface in java.lang">notifyAll</A>, <A HREF="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#toString()" title="class or interface in java.lang">toString</A>, <A HREF="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#wait()" title="class or interface in java.lang">wait</A>, <A HREF="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#wait(long)" title="class or interface in java.lang">wait</A>, <A HREF="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#wait(long, int)" title="class or interface in java.lang">wait</A></CODE></TD>
</TR>
</TABLE>
&nbsp;
<P>

<!-- ============ FIELD DETAIL =========== -->

<A NAME="field_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Field Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="PROPERTY_APPROVER_PREFIX"><!-- --></A><H3>
PROPERTY_APPROVER_PREFIX</H3>
<PRE>
protected static final <A HREF="http://docs.oracle.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</A> <A HREF="../../../../src-html/org/apache/wiki/workflow/WorkflowManager.html#line.59"><B>PROPERTY_APPROVER_PREFIX</B></A></PRE>
<DL>
<DD>The prefix to use for looking up <code>jspwiki.properties</code> approval roles.
<P>
<DL>
<DT><B>See Also:</B><DD><A HREF="../../../../constant-values.html#org.apache.wiki.workflow.WorkflowManager.PROPERTY_APPROVER_PREFIX">Constant Field Values</A></DL>
</DL>

<!-- ========= CONSTRUCTOR DETAIL ======== -->

<A NAME="constructor_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Constructor Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="WorkflowManager()"><!-- --></A><H3>
WorkflowManager</H3>
<PRE>
public <A HREF="../../../../src-html/org/apache/wiki/workflow/WorkflowManager.html#line.65"><B>WorkflowManager</B></A>()</PRE>
<DL>
<DD>Constructs a new WorkflowManager, with an empty workflow cache. New
 Workflows are automatically assigned unique identifiers, starting with 1.
<P>
</DL>

<!-- ============ METHOD DETAIL ========== -->

<A NAME="method_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Method Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="start(org.apache.wiki.workflow.Workflow)"><!-- --></A><H3>
start</H3>
<PRE>
public void <A HREF="../../../../src-html/org/apache/wiki/workflow/WorkflowManager.html#line.81"><B>start</B></A>(<A HREF="../../../../org/apache/wiki/workflow/Workflow.html" title="class in org.apache.wiki.workflow">Workflow</A>&nbsp;workflow)
           throws <A HREF="../../../../org/apache/wiki/api/exceptions/WikiException.html" title="class in org.apache.wiki.api.exceptions">WikiException</A></PRE>
<DL>
<DD>Adds a new workflow to the set of workflows and starts it. The new
 workflow is automatically assigned a unique ID. If another workflow with
 the same ID already exists, this method throws a WikIException.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>workflow</CODE> - the workflow to start
<DT><B>Throws:</B>
<DD><CODE><A HREF="../../../../org/apache/wiki/api/exceptions/WikiException.html" title="class in org.apache.wiki.api.exceptions">WikiException</A></CODE> - if a workflow the automatically assigned
 ID already exist; this should not happen normally</DL>
</DD>
</DL>
<HR>

<A NAME="getWorkflows()"><!-- --></A><H3>
getWorkflows</H3>
<PRE>
public <A HREF="http://docs.oracle.com/javase/6/docs/api/java/util/Collection.html?is-external=true" title="class or interface in java.util">Collection</A> <A HREF="../../../../src-html/org/apache/wiki/workflow/WorkflowManager.html#line.94"><B>getWorkflows</B></A>()</PRE>
<DL>
<DD>Returns a collection of the currently active workflows.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>

<DT><B>Returns:</B><DD>the current workflows</DL>
</DD>
</DL>
<HR>

<A NAME="getCompletedWorkflows()"><!-- --></A><H3>
getCompletedWorkflows</H3>
<PRE>
public <A HREF="http://docs.oracle.com/javase/6/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</A> <A HREF="../../../../src-html/org/apache/wiki/workflow/WorkflowManager.html#line.103"><B>getCompletedWorkflows</B></A>()</PRE>
<DL>
<DD>Returns a collection of finished workflows; that is, those that have aborted or completed.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>

<DT><B>Returns:</B><DD>the finished workflows</DL>
</DD>
</DL>
<HR>

<A NAME="initialize(org.apache.wiki.WikiEngine, java.util.Properties)"><!-- --></A><H3>
initialize</H3>
<PRE>
public void <A HREF="../../../../src-html/org/apache/wiki/workflow/WorkflowManager.html#line.125"><B>initialize</B></A>(<A HREF="../../../../org/apache/wiki/WikiEngine.html" title="class in org.apache.wiki">WikiEngine</A>&nbsp;engine,
                       <A HREF="http://docs.oracle.com/javase/6/docs/api/java/util/Properties.html?is-external=true" title="class or interface in java.util">Properties</A>&nbsp;props)</PRE>
<DL>
<DD>Initializes the WorkflowManager using a specfied WikiEngine and
 properties. Any properties that begin with
 <A HREF="../../../../org/apache/wiki/workflow/WorkflowManager.html#PROPERTY_APPROVER_PREFIX"><CODE>PROPERTY_APPROVER_PREFIX</CODE></A> will be assumed to be
 Decisions that require approval. For a given property key, everything
 after the prefix denotes the Decision's message key. The property
 value indicates the Principal (Role, GroupPrincipal, WikiPrincipal) that
 must approve the Decision. For example, if the property key/value pair
 is <code>jspwiki.approver.workflow.saveWikiPage=Admin</code>,
 the Decision's message key is <code>workflow.saveWikiPage</code>.
 The Principal <code>Admin</code> will be resolved via
 <A HREF="../../../../org/apache/wiki/auth/AuthorizationManager.html#resolvePrincipal(java.lang.String)"><CODE>AuthorizationManager.resolvePrincipal(String)</CODE></A>.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>engine</CODE> - the wiki engine to associate with this WorkflowManager<DD><CODE>props</CODE> - the wiki engine's properties</DL>
</DD>
</DL>
<HR>

<A NAME="requiresApproval(java.lang.String)"><!-- --></A><H3>
requiresApproval</H3>
<PRE>
public boolean <A HREF="../../../../src-html/org/apache/wiki/workflow/WorkflowManager.html#line.161"><B>requiresApproval</B></A>(<A HREF="http://docs.oracle.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</A>&nbsp;messageKey)</PRE>
<DL>
<DD>Returns <code>true</code> if a workflow matching a particular key
 contains an approval step.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>messageKey</CODE> - the name of the workflow; corresponds to the value returned by
            <A HREF="../../../../org/apache/wiki/workflow/Workflow.html#getMessageKey()"><CODE>Workflow.getMessageKey()</CODE></A>.
<DT><B>Returns:</B><DD>the result</DL>
</DD>
</DL>
<HR>

<A NAME="getApprover(java.lang.String)"><!-- --></A><H3>
getApprover</H3>
<PRE>
public <A HREF="http://docs.oracle.com/javase/6/docs/api/java/security/Principal.html?is-external=true" title="class or interface in java.security">Principal</A> <A HREF="../../../../src-html/org/apache/wiki/workflow/WorkflowManager.html#line.177"><B>getApprover</B></A>(<A HREF="http://docs.oracle.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</A>&nbsp;messageKey)
                      throws <A HREF="../../../../org/apache/wiki/api/exceptions/WikiException.html" title="class in org.apache.wiki.api.exceptions">WikiException</A></PRE>
<DL>
<DD>Looks up and resolves the actor who approves a Decision for a particular
 Workflow, based on the Workflow's message key. If not found, or if
 Principal is Unresolved, throws WikiException. This particular
 implementation always returns the GroupPrincipal <code>Admin</code>
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>messageKey</CODE> - the Decision's message key
<DT><B>Returns:</B><DD>the actor who approves Decisions
<DT><B>Throws:</B>
<DD><CODE><A HREF="../../../../org/apache/wiki/api/exceptions/WikiException.html" title="class in org.apache.wiki.api.exceptions">WikiException</A></CODE> - if the message key was not found, or the
 Principal value corresponding to the key could not be resolved</DL>
</DD>
</DL>
<HR>

<A NAME="getEngine()"><!-- --></A><H3>
getEngine</H3>
<PRE>
protected <A HREF="../../../../org/apache/wiki/WikiEngine.html" title="class in org.apache.wiki">WikiEngine</A> <A HREF="../../../../src-html/org/apache/wiki/workflow/WorkflowManager.html#line.208"><B>getEngine</B></A>()</PRE>
<DL>
<DD>Protected helper method that returns the associated WikiEngine
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>

<DT><B>Returns:</B><DD>the wiki engine</DL>
</DD>
</DL>
<HR>

<A NAME="getDecisionQueue()"><!-- --></A><H3>
getDecisionQueue</H3>
<PRE>
public <A HREF="../../../../org/apache/wiki/workflow/DecisionQueue.html" title="class in org.apache.wiki.workflow">DecisionQueue</A> <A HREF="../../../../src-html/org/apache/wiki/workflow/WorkflowManager.html#line.222"><B>getDecisionQueue</B></A>()</PRE>
<DL>
<DD>Returns the DecisionQueue associated with this WorkflowManager
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>

<DT><B>Returns:</B><DD>the decision queue</DL>
</DD>
</DL>
<HR>

<A NAME="getOwnerWorkflows(org.apache.wiki.WikiSession)"><!-- --></A><H3>
getOwnerWorkflows</H3>
<PRE>
public <A HREF="http://docs.oracle.com/javase/6/docs/api/java/util/Collection.html?is-external=true" title="class or interface in java.util">Collection</A> <A HREF="../../../../src-html/org/apache/wiki/workflow/WorkflowManager.html#line.250"><B>getOwnerWorkflows</B></A>(<A HREF="../../../../org/apache/wiki/WikiSession.html" title="class in org.apache.wiki">WikiSession</A>&nbsp;session)</PRE>
<DL>
<DD>Returns the current workflows a wiki session owns. These are workflows whose
 <A HREF="../../../../org/apache/wiki/workflow/Workflow.html#getOwner()"><CODE>Workflow.getOwner()</CODE></A> method returns a Principal also possessed by the
 wiki session (see <A HREF="../../../../org/apache/wiki/WikiSession.html#getPrincipals()"><CODE>WikiSession.getPrincipals()</CODE></A>). If the
 wiki session is not authenticated, this method returns an empty Collection.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>session</CODE> - the wiki session
<DT><B>Returns:</B><DD>the collection workflows the wiki session owns, which may be empty</DL>
</DD>
</DL>
<HR>

<A NAME="actionPerformed(org.apache.wiki.event.WikiEvent)"><!-- --></A><H3>
actionPerformed</H3>
<PRE>
public void <A HREF="../../../../src-html/org/apache/wiki/workflow/WorkflowManager.html#line.282"><B>actionPerformed</B></A>(<A HREF="../../../../org/apache/wiki/event/WikiEvent.html" title="class in org.apache.wiki.event">WikiEvent</A>&nbsp;event)</PRE>
<DL>
<DD>Listens for <A HREF="../../../../org/apache/wiki/event/WorkflowEvent.html" title="class in org.apache.wiki.event"><CODE>WorkflowEvent</CODE></A> objects emitted
 by Workflows. In particular, this method listens for
 <A HREF="../../../../org/apache/wiki/event/WorkflowEvent.html#CREATED"><CODE>WorkflowEvent.CREATED</CODE></A>,
 <A HREF="../../../../org/apache/wiki/event/WorkflowEvent.html#ABORTED"><CODE>WorkflowEvent.ABORTED</CODE></A> and
 <A HREF="../../../../org/apache/wiki/event/WorkflowEvent.html#COMPLETED"><CODE>WorkflowEvent.COMPLETED</CODE></A> events. If a
 workflow is created, it is automatically added to the cache. If one is
 aborted or completed, it is automatically removed.
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../../../org/apache/wiki/event/WikiEventListener.html#actionPerformed(org.apache.wiki.event.WikiEvent)">actionPerformed</A></CODE> in interface <CODE><A HREF="../../../../org/apache/wiki/event/WikiEventListener.html" title="interface in org.apache.wiki.event">WikiEventListener</A></CODE></DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>event</CODE> - the event passed to this listener</DL>
</DD>
</DL>
<HR>

<A NAME="add(org.apache.wiki.workflow.Workflow)"><!-- --></A><H3>
add</H3>
<PRE>
protected void <A HREF="../../../../src-html/org/apache/wiki/workflow/WorkflowManager.html#line.315"><B>add</B></A>(<A HREF="../../../../org/apache/wiki/workflow/Workflow.html" title="class in org.apache.wiki.workflow">Workflow</A>&nbsp;workflow)</PRE>
<DL>
<DD>Protected helper method that adds a newly created Workflow to the cache,
 and sets its <code>workflowManager</code> and <code>Id</code>
 properties if not set.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>workflow</CODE> - the workflow to add</DL>
</DD>
</DL>
<HR>

<A NAME="remove(org.apache.wiki.workflow.Workflow)"><!-- --></A><H3>
remove</H3>
<PRE>
protected void <A HREF="../../../../src-html/org/apache/wiki/workflow/WorkflowManager.html#line.336"><B>remove</B></A>(<A HREF="../../../../org/apache/wiki/workflow/Workflow.html" title="class in org.apache.wiki.workflow">Workflow</A>&nbsp;workflow)</PRE>
<DL>
<DD>Protected helper method that removes a specified Workflow from the cache,
 and moves it to the workflow history list. This method defensively
 checks to see if the workflow has not yet been removed.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>workflow</CODE> - the workflow to remove</DL>
</DD>
</DL>
<!-- ========= END OF CLASS DATA ========= -->
<HR>


<!-- ======= START OF BOTTOM NAVBAR ====== -->
<A NAME="navbar_bottom"><!-- --></A>
<A HREF="#skip-navbar_bottom" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/WorkflowManager.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../../org/apache/wiki/workflow/WorkflowBuilder.html" title="class in org.apache.wiki.workflow"><B>PREV CLASS</B></A>&nbsp;
&nbsp;NEXT CLASS</FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../index.html?org/apache/wiki/workflow/WorkflowManager.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="WorkflowManager.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;<A HREF="#field_summary">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;<A HREF="#field_detail">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_bottom"></A>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<HR>
Copyright © {inceptionYear}-2014 The Apache Software Foundation. All rights reserved.
</BODY>
</HTML>
