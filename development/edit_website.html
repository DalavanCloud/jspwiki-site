<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html id="top" xmlns="http://www.w3.org/1999/xhtml" xmlns:jspwiki="http://www.jspwiki.org"><head>
  <base href="https://jspwiki.apache.org"></base>
  <title>Edit Website</title>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" type="text/css" media="screen, projection, print" href="/css/jspwiki.css">
  <link rel="stylesheet" type="text/css" media="print" href="/css/jspwiki_print.css">
  <link rel="alternate stylesheet" type="text/css" href="/css/jspwiki_print.css" title="Print friendly">
  <link rel="alternate stylesheet" type="text/css" href="/css/jspwiki.css" title="Standard">
  <link rel="shortcut icon" type="image/x-icon" href="/images/favicon.ico">
  <link rel="icon" type="image/x-icon" href="/images/favicon.ico">
</head>
<body class="view">
<div id="wikibody" class="fav-left">
  <div id="header">
    <!-- <div class="titlebox"></div> -->
    <div class="applicationlogo"> 
      <a href="">Main</a>
    </div>

    <div class="companylogo"></div>
  
    <div class="userbox">
      <a href="http://www.apache.org" alt="Apache Software Foundation">
        <img src="/images/apache_software_foundation_logo.png" alt="Apache Software Foundation" id="asf-logo" style="width: 93px; height: 45px;">
      </a>
      <div class="clearbox"></div>
    </div>

    <div class="pagename">
      Edit Website
    </div>
    
    <div class="breadcrumbs"><a href="https://jspwiki.apache.org">JSPWiki</a> &raquo; <a href="https://jspwiki.apache.org/development/">Development</a> </div>
  </div>

  <div id="content">
    <div id="page">
      <div id="actionsTop" class="pageactions"> 
      <ul>
        <li>
          <a href="http://www.apache.org/foundation/" class="action edit" accesskey="f" title="The Foundation [f]">
            <span class="accesskey">F</span>oundation
          </a>
        </li>
        <li>
          <a href="http://projects.apache.org" class="action edit" accesskey="p" title="The Projects [p]">
            <span class="accesskey">P</span>rojects
          </a>
        </li>
        <li>
          <a href="http://people.apache.org" class="action edit" accesskey="e" title="The People [e]">
            P<span class="accesskey">e</span>ople
          </a>
        </li>
        <li>
          <a href="http://www.apache.org/foundation/getinvolved.html" class="action edit" accesskey="i" title="Get Involved [i]">
            Get <span class="accesskey">I</span>nvolved
          </a>
        </li>
        <li>
          <a title="Download [ d ]" class="action edit" accesskey="d" href="http://www.apache.org/dyn/closer.cgi">
            <span class="accesskey">D</span>ownload
          </a>
        </li>
        <li href="#" id="morebutton">
          <a href="http://www.apache.org/foundation/sponsorship.html" accesskey="s" class="action edit" title="Support Apache [ s ]">
            <span class="accesskey">S</span>upport Apache&nbsp;
          </a>
        </li>
      </ul>
      </div>

      <div class="tabmenu">
        <a class="activetab" id="menu-pagecontent" accesskey="J" href="/index.html">
          <span class="accesskey">J</span>SPWiki&nbsp;
        </a>
        <!-- <a id="menu-attach" accesskey="a"><span class="accesskey">A</span>ttach</a>
        <a id="menu-info" href="http://www.jspwiki.org/PageInfo.jsp?page=Main" accesskey="i"><span class="accesskey">I</span>nfo</a> -->
      </div>
      
      <div class="tabs">
        <div id="pagecontent">
          <h2>Apache JSPWiki website</h2>
<p>(adapted from <a href="https://github.com/apache/incubator-guacamole-website">Apache Guacamole site</a>)</p>
<p><a href="https://git-wip-us.apache.org/repos/asf?p=jspwiki-site.git">This repository</a> contains the source for the website of Apache JSPWiki, so it can be deployed via <a href="https://blogs.apache.org/infra/entry/git_based_websites_available">gitpubsub</a>.</p>
<p>The website itself is completely static, being automatically generated by <a href="https://jbake.org/">JBake</a> prior to deployment. The content<br/>of the website is written in a mixture of Freemarker templates and Markdown. Templated content is interpreted only<br/>at build time, with the final result being completely static.</p>
<p>To facilitate ease of development and testing, this repository also contains a couple of build scripts, <code>ci.sh</code><br/>and <code>mvn-ci.sh</code>, the usage of which is documented below.</p>
<h2>Table of contents</h2>
<ul>
  <li><a href="#repository-structure">Repository structure</a></li>
  <li><a href="#build-prerequisites">Build prerequisites</a></li>
  <li><a href="#testing-changes-locally">Testing changes locally</a></li>
  <li><a href="#publishing-changes">Publishing changes</a></li>
</ul>
<h2>Repository structure<a name="repository-structure"></a></h2>
<p>In addition to the <code>LICENSE</code> and <code>NOTICE</code> files required of any proper Apache-licensed project,<br/>the repository contains the following critical files:</p>
<ul>
  <li><strong><code>./pom.xml</code></strong>: orchestrates the maven website build</li>
  <li><strong><code>./ci.sh</code></strong>: script, meant to be run by a CI server, to build and deploy the website.</li>
  <li><strong><code>./mvn-ci.sh</code></strong>: script to build and deploy the website using Maven.</li>
  <li><strong><code>./src/main/jbake/</code></strong>: standard <a href="https://github.com/ingenieux/jbake-maven-plugin">jbake maven plugin structure</a>, contains three subdirectories:
    <ul>
      <li><code>./src/main/jbake/assets/</code>: The assets directory is where you should place your static files such as images,<br/>CSS files, JavaScript files, etc. These files are copied over to the baked output as is. You can create any<br/>directory structure you like in the assets directory and this structure will be maintained when copied.</li>
      <li><code>./src/main/jbake/content/</code>: holds content files, with the extension of these files determining what<br/>type of content it contains (i.e.: <code>.md</code> for <a href="http://daringfireball.net/projects/markdown/syntax">Markdown</a>, <code>.html</code> for raw HTML, etc.)</li>
      <li><code>./src/main/jbake/templates/</code>: holds templates files, with the extension of these files determining<br/>the templates engine (i.e.: <code>.ftl</code> for <a href="https://freemarker.apache.org/">Freemarker</a>, <code>.thyme</code> for <a href="http://www.thymeleaf.org/">Thymeleaf</a>, etc.)</li>
    </ul>
  </li>
  <li><strong><code>./content/</code></strong>: the actual content served for jspwiki.apache.org, see <a href="#publishing-changes">publishing changes</a> below</li>
</ul>
<h2>Build prerequisites<a name="build-prerequisites"></a></h2>
<p>The CI build (<code>ci.sh</code>) needs Java 7 and a JBake installation under <code>$JBAKE_HOME</code>. This script is run at <a href="https://builds.apache.org/job/jspwiki-site/">ASF's Jenkins instance</a>.<br/>As there isn't a Maven installation at the nodes which perform this job, this script only takes the changes from the "jbake" branch,<br/>generates the site and puts it on the "asf-site" branch. As for now, javadocs must be pushed locally through the Maven build script.</p>
<p>The Maven build (<code>mvn-ci.sh</code>) needs at least Maven 3.1.1 and Java 7, thus these must be installed first. It's essentially the<br/>same build as the CI build, but done through Maven. This allows us to generate the site and also put the javadocs in there.</p>
<h2>Testing changes locally<a name="testing-changes-locally"></a></h2>
<p>Just run <code>mvn clean jbake:inline</code> and the site will be accesible through <a href="http://localhost:8080">http://localhost:8080</a>. Changes will be reloaded<br/>on the fly. When done testing your local changes, press <code>Enter</code> to stop the web server and return to the shell.</p>
<p>In order to be able to navigate locally, you'll need to edit the <code>site.host</code> property at <code>./src/main/jbake/jbake.properties</code>.<br/>Do <strong>NOT</strong> commit that change.</p>
<h2>Publishing changes<a name="publishing-changes"></a></h2>
<p>Changes to the website are published using Apache's <a href="https://blogs.apache.org/infra/entry/git_based_websites_available">gitpubsub</a> which relies on a<br/>special branch called "asf-site" containing <em>all website content</em>.</p>
<p>In the Apache JSPWiki website repository, the "asf-site" branch is an "orphan" branch. Updating the website thus involves:</p>
<ol>
  <li>Making and testing your changes locally</li>
  <li>Replacing the entire contents within "asf-site" with the newly-generated site from the "jbake" branch.</li>
</ol>
<p>Second step is automated through <code>ci.sh</code> and <code>mvn-ci.sh</code> scripts. </p>
<p>Keep in mind that the new content must be <em>staged</em> for and committed in this branch. Once you have verified that the staged<br/>content is as expected, commit your changes (along with a useful commit message describing the changes at a high level)<br/>using <code>git commit</code> and publish the update using <code>git push origin</code>.</p>
<p>If you wish to unstage your changes, use <code>git reset --hard HEAD</code> to return to the original state of "jbake", wiping<br/>out any local modifications. You can then return to whichever branch you were working on with <code>git checkout</code>.</p>
        </div>
        <div style="clear:both;"></div>
      </div>
      <div id="actionsBottom" class="pageactions"> 
        <a href="#top" class="action quick2top" title="Go to top">ï¿½</a>
      </div>

    </div>

    <div id="favorites">
      <div class="leftmenu">
<p><strong>General</strong></p>
<ul>
  <li><a href="/index.html">Home</a></li>
  <li><a href="/general/downloads.html">Downloads</a></li>
  <li><a href="/general/news.html">News</a></li>
  <li><a href="http://www.apache.org/licenses/" class="external">License</a></li>
</ul>

<p><strong>Documentation</strong></p>
<ul>
  <li><a href="https://jspwiki-wiki.apache.org" class="external">Wiki</a></li>
  <li><a href="https://jspwiki-wiki.apache.org/Wiki.jsp?page=Getting%20Started" class="external">Getting started</a></li>
</ul>

<p><strong>Community</strong></p>
<ul>
  <li><a href="https://jspwiki-wiki.apache.org/Wiki.jsp?page=Getting%20Involved" class="external">Getting Involved</a></li>
  <li><a href="/community/mailing_lists.html">Mailing Lists</a></li>
  <li><a href="/community/social_media.html">Social Media</a></li>
  <li><a href="https://issues.apache.org/jira/browse/JSPWIKI#selectedTab=com.atlassian.jira.plugin.system.project%3Aissues-panel" class="external">Issue Tracker</a></li>
  <li><a href="http://www.ecyrd.com/JSPWiki/" class="external">Legacy Site</a></li>
  <li><a href="/community/people.html">People</a></li>
</ul>

<p><strong>Development</strong></p>
<ul>
  <li><a href="https://git-wip-us.apache.org/repos/asf?p=jspwiki.git;a=summary" class="external">Browse Sources</a></li>
  <li><a href="/apidocs/index.html">JavaDocs</a></li>
  <li><a href="/development/source_and_guide.html">Get and Build Source</a></li>
  <li><a href="https://builds.apache.org/job/JSPWiki/" class="external">Jenkins CI</a></li>
  <li><a href="https://builds.apache.org/analysis/overview?id=org.apache.jspwiki%3Ajspwiki-builder" class="external">Sonar Analysis</a></li>
  <li><a href="/development/edit_website.html">Edit Website</a></li>
  <li><a href="https://git-wip-us.apache.org/repos/asf?p=jspwiki.git;a=blob;f=ChangeLog" class="external">Change Log</a></li>
</ul>

<p><strong>PMC</strong></p>
<ul>
  <li><a href="/pmc/how_to_release.html">How to Release</a></li>
  <li><a href="/pmc/board_reports.html">Board Reports</a></li>
</ul>

<p><strong>ASF</strong></p>
<ul>
  <li><a href="http://www.apache.org" class="external">Website</a></li>
  <li><a href="http://www.apache.org/foundation/contributing.html" class="external">Donations</a></li>
  <li><a href="http://www.apache.org/foundation/sponsorship.html" class="external">Sponsorship</a></li>
  <li><a href="http://www.apache.org/foundation/thanks.html" class="external">Thanks</a></li>
</ul>      </div>
      <div class="leftmenufooter">
        <br /><hr>
      </div>
      <div class="wikiversion">
JSPWiki v2.10.2      </div>  
    </div>

	<div class="clearbox"></div>
  </div>
 
  <div id="footer">
    <div class="copyright">
      Copyright &copy; 2017 The Apache Software Foundation, Licensed under 
      the <a href="http://www.apache.org/licenses/LICENSE-2.0" class="external">Apache License, Version 2.0</a>.
      <br />Apache and the Apache feather logo are trademarks of The Apache Software Foundation.
    </div>
  </div>
</div>
</body></html>